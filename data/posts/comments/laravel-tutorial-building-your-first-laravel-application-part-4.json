{"id":4,"user_id":1,"category_id":1,"title":"Laravel Tutorial Building Your First Laravel Application Part 4","slug":"laravel-tutorial-building-your-first-laravel-application-part-4","body":"    <p>\r\n    In the previous post part 3, We created the to-do-list and showed it in our\r\n    homepage.\r\n    <\/p>\r\n    <p>then we builded a form to complete any task.<\/p>\r\n    <p>\r\n    now we will build the delete task route and a form to create new task with\r\n    validation in mind to keep form safe\r\n    <\/p>\r\n    <p>now we can finish this project.<\/p>\r\n    <hr \/>\r\n    <p>This Tutorial is divided into parts:<\/p>\r\n    <ol>\r\n    <li>\r\n        <a\r\n            href=\"\/blog\/laravel-tutorial-building-your-first-laravel-application-part-1\"\r\n            >part 1<\/a\r\n        >\r\n    <\/li>\r\n    <li>\r\n        <a\r\n            href=\"\/blog\/laravel-tutorial-building-your-first-laravel-application-part-2\"\r\n            >part 2<\/a\r\n        >\r\n    <\/li>\r\n    <li>\r\n        <a\r\n            href=\"\/blog\/laravel-tutorial-building-your-first-laravel-application-part-3\"\r\n            >part 3<\/a\r\n        >\r\n    <\/li>\r\n    <li>\r\n        <strong\r\n            ><span class=\"text-secondary\" data-tomark-pass=\"\"\r\n                >Part 4<\/span\r\n            ><\/strong\r\n        >\r\n    <\/li>\r\n    <li>\r\n        <a\r\n            href=\"\/blog\/laravel-tutorial-building-your-first-laravel-application-part-5\"\r\n            >part 5<\/a\r\n        >\r\n    <\/li>\r\n    <\/ol>\r\n    <hr \/>\r\n    <p>\r\n    <strong>Note<\/strong> The complete, finished source code for this project is\r\n    <a\r\n        target=\"_blank\"\r\n        href=\"https:\/\/github.com\/abo3adel\/laravel-tutorialyour-first-app\"\r\n        >available on GitHub<\/a\r\n    >.\r\n    <\/p>\r\n    <h2>Deleting a task<\/h2>\r\n    <p>create a route for delete:<\/p>\r\n    <pre class=\"lang-php\"><code data-language=\"php\">\r\n    \/**\r\n    * Delete a task\r\n    *\/\r\n    Route::delete('{task}', function (App\\Task $task) {\r\n    $task-&gt;delete();\r\n\r\n    return back();\r\n    });\r\n    <\/code><\/pre>\r\n    <p>\r\n    and let`s create our form in\r\n    <code data-backticks=\"3\">task\/index.blade.php<\/code>\r\n    <\/p>\r\n    <p><strong>Replace<\/strong> this line<\/p>\r\n    <pre\r\n    class=\"lang-php\"\r\n    ><code data-language=\"php\">&lt;button class=\"btn btn-danger m-\"&gt;Delete&lt;\/button&gt;\r\n    <\/code><\/pre>\r\n    <p><strong>With this<\/strong><\/p>\r\n    <pre\r\n    class=\"lang-php\"\r\n    ><code data-language=\"php\">\r\n    &lt;form action=\"{{$task-&gt;id}}\" method=\"post\" class=\"d-inline\"&gt;\r\n    @method('DELETE')\r\n    @csrf\r\n    &lt;button type=\"submit\" class=\"btn btn-danger\"&gt;Delete&lt;\/button&gt;\r\n    &lt;\/form&gt;\r\n    <\/code><\/pre>\r\n    <p>\r\n    <strong>Now<\/strong> try to complete or delete a task and see if every thing\r\n    is working correctly.\r\n    <\/p>\r\n    <h2>Adding new task<\/h2>\r\n    <p>to add a new task we will add a route with post method<\/p>\r\n    <pre class=\"lang-php\"><code data-language=\"php\">\r\n    \/**\r\n    * Add new Task\r\n    *\/\r\n    Route::post('\/', function () {\r\n    \/\/ validate task body\r\n\r\n    \/\/ save task\r\n    App\\Task::create([\r\n        'body' =&gt; request('body')\r\n    ]);\r\n\r\n    \/\/ return to home page\r\n    return back();\r\n    });\r\n    <\/code><\/pre>\r\n    <p>\r\n    and create new task form will be in\r\n    <code data-backticks=\"3\">task\/index.blade.php<\/code>\r\n    <\/p>\r\n    <pre class=\"lang-php\"><code data-language=\"php\">\r\n    @section('content')\r\n\r\n    &lt;!-- add this --&gt;\r\n    &lt;div class=\"card w-75 mx-auto mb-4\"&gt;\r\n    &lt;div class=\"card-header bg-primary text-light\"&gt;\r\n        Add Task\r\n    &lt;\/div&gt;\r\n    &lt;div class=\"card-body\"&gt;\r\n        &lt;form action=\"\/\" method=\"post\" \r\n        class=\"form-inline mx-auto w-75\"&gt;\r\n\r\n            @csrf\r\n\r\n            &lt;div class=\"form-group w-75\"&gt;\r\n                &lt;input type=\"text\" name=\"body\" \r\n                class=\"form-control w-100\" \r\n                placeholder=\"Task Body\" \/&gt;\r\n            &lt;\/div&gt;\r\n\r\n            &lt;div class=\"form-group\"&gt;\r\n                &lt;button type=\"submit\" \r\n                class=\"btn btn-primary mx-3\"&gt;\r\n                    Save\r\n                &lt;\/button&gt;\r\n            &lt;\/div&gt;\r\n        &lt;\/form&gt;\r\n    &lt;\/div&gt;\r\n    &lt;\/div&gt;\r\n    <\/code><\/pre>\r\n    <h3>First validate our task<\/h3>\r\n    <p>\r\n    if you submitted new task form you will see an\r\n    <strong\r\n        ><a\r\n            target=\"_blank\"\r\n            href=\"https:\/\/laravel.com\/docs\/6.x\/eloquent#mass-assignment\"\r\n            >Mass Assignment<\/a\r\n        ><\/strong\r\n    >\r\n    error like:\r\n    <\/p>\r\n    <pre\r\n    class=\"lang-bash\"\r\n    ><code data-language=\"bash\">  Add [body] to fillable property to allow mass assignment on [App\\Task].\r\n    <\/code><\/pre>\r\n    <blockquote>\r\n    <p>\r\n        A\r\n        <strong\r\n            ><a\r\n                target=\"_blank\"\r\n                href=\"https:\/\/laravel.com\/docs\/6.x\/eloquent#mass-assignment\"\r\n                >Mass Assignment<\/a\r\n            ><\/strong\r\n        >\r\n        error occures when we try to change a column in database after\r\n        submitting a form.\r\n    <\/p>\r\n    <\/blockquote>\r\n    <p>\r\n    so to <strong>fix<\/strong> our error, open\r\n    <code data-backticks=\"3\">app\/Task.php<\/code> and add this inside the class:\r\n    <\/p>\r\n    <pre\r\n    class=\"lang-php\"\r\n    ><code data-language=\"php\">  protected $fillable = ['body'];\r\n    <\/code><\/pre>\r\n    <p><strong>Now again<\/strong> try to create new task and it should work<\/p>\r\n    <blockquote>\r\n    <p>\r\n        <strong>Note<\/strong> if tried to submit the form without writing any\r\n        text it will still pass and give you an error like\r\n        <code data-backticks=\"3\">Column 'body' cannot be null<\/code\r\n        ><br data-tomark-pass=\"\" \/><strong>So<\/strong> we need to validate our\r\n        data before saving it.\r\n    <\/p>\r\n    <\/blockquote>\r\n    <p>\r\n    <strong>Read<\/strong> more about validation at\r\n    <a target=\"_blank\" href=\"https:\/\/laravel.com\/docs\/6.x\/validation\"\r\n        >Laravel Validation<\/a\r\n    >\r\n    <\/p>\r\n    <p>in <code data-backticks=\"3\">routes\/web.php<\/code><\/p>\r\n    <pre class=\"lang-php\"><code data-language=\"php\">\r\n    \/\/ validate task body\r\n    $body = request()-&gt;validate([\r\n    'body' =&gt; 'required|string|max:255'\r\n    ])['body'];\r\n\r\n    \/\/ save task\r\n    App\\Task::create([\r\n    'body' =&gt; $body\r\n    ]);\r\n    <\/code><\/pre>\r\n    <p>\r\n    if you tried to resubmit the form without any data it will just return to\r\n    homepage,<br data-tomark-pass=\"\" \/><strong>But<\/strong> How to show the\r\n    errors\r\n    <\/p>\r\n    <p>\r\n    in <code data-backticks=\"3\">task\/index.blade.php<\/code> add this before our\r\n    form\r\n    <\/p>\r\n    <pre class=\"lang-php\"><code data-language=\"php\">\r\n    @if ($errors-&gt;any())\r\n    &lt;div class=\"alert alert-danger w-75 mx-auto font-weight-bold\"&gt;\r\n        Please fix the following errors:&lt;br \/&gt;\r\n        @foreach ($errors-&gt;all() as $err)\r\n            &lt;span class='ml-3'&gt;* {{$err}}&lt;\/span&gt;&lt;br \/&gt;\r\n        @endforeach\r\n    &lt;\/div&gt;\r\n    @endif\r\n    <\/code><\/pre>\r\n    <p>and <strong>Replace<\/strong> this line<\/p>\r\n    <pre\r\n    class=\"lang-html\"\r\n    ><code data-language=\"html\">&lt;input type=\"text\" name=\"body\" class=\"form-control w-100\" placeholder=\"Task Body\" \/&gt;\r\n    <\/code><\/pre>\r\n    <p>with this<\/p>\r\n    <pre\r\n    class=\"lang-php\"\r\n    ><code data-language=\"php\">&lt;input type=\"text\" name=\"body\" class=\"form-control w-100 {{$errors-&gt;has('body') ? 'is-invalid' : ''}}\" placeholder=\"Task Body\" \/&gt;\r\n    <\/code><\/pre>\r\n    <p>\r\n    <strong>Now<\/strong> our application should be working successfully as we\r\n    planned,<br data-tomark-pass=\"\" \/>\r\n    In the next part i will show you how you can test this form.<br\r\n        data-tomark-pass=\"\"\r\n    \/>\r\n    <\/p>","img":"ZOTwZYhoNkFZCV5cLA1beqKHLI4MsD0w4BdpVUIa.png","created_at":"2019-09-29T00:00:00.000000Z","updated_at":"2019-09-29T00:00:00.000000Z","updated":"29 Sep 2019","comments":[{"id":9,"post_id":4,"user_name":"cierra08","user_mail":"pfeffer.ollie@example.net","body":"Error qui molestiae incidunt illo. Recusandae vitae eum qui reiciendis officia rem porro. Aperiam ut quisquam et. Autem consequatur fugiat quas perspiciatis pariatur.","created_at":"2020-09-25T15:41:00.000000Z","updated_at":"2020-09-25T15:41:00.000000Z","updated":"25 Sep 2020","gravatar":"https:\/\/www.gravatar.com\/avatar\/f3a5f4dd24703e3ab3521cf86a611012.jpg?s=200&d=mm"}]}