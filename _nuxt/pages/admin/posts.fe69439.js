(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{238:function(t,e,r){"use strict";function n(t,e,r){var n=document.querySelector(t),o=n.classList;return o.remove(e),o.add("fa-pulse"),o.add("fa-spinner"),r.$nuxt.$loading.start(),n}function o(t,e,r){var n=document.querySelector(t),o=n.classList;return o.add(e),o.remove("fa-pulse"),o.remove("fa-spinner"),r.$nuxt.$loading.finish(),n}r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o}))},239:function(t,e,r){var content=r(253);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(90).default)("44db7874",content,!0,{sourceMap:!1})},240:function(t,e,r){var content=r(256);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(90).default)("6e857086",content,!0,{sourceMap:!1})},244:function(t,e,r){"use strict";r.r(e);r(17),r(18),r(9),r(69),r(25);var n=r(3),o=r(22),c=r(33),l=r(31),f=r(32),d=r(19),m=r(8),v=r(4),h=r(267),y=r.n(h);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}var x=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},j=function(t){Object(l.a)(f,t);var e,r=_(f);function f(){var t;return Object(o.a)(this,f),(t=r.apply(this,arguments)).tag="",t.autocompleteItems=[],t}return Object(c.a)(f,[{key:"loadTags",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.$nuxt.$loading.start(),t.next=3,this.$axios.$get(this.path);case 3:if(e=t.sent,this.$nuxt.$loading.finish(),e){t.next=8;break}return this.$nf.error(),t.abrupt("return");case 8:e.map((function(t){return r.autocompleteItems.push({text:t.title,slug:t.slug})}));case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"mounted",value:function(){var t=this;this.$nextTick((function(){return t.loadTags()}))}},{key:"filteredItems",get:function(){var t=this;return this.autocompleteItems.filter((function(i){return-1!==i.text.toLowerCase().indexOf(t.tag.toLowerCase())}))}}]),f}(v.d);x([Object(v.b)({type:String,required:!0})],j.prototype,"path",void 0);var C=j=x([Object(v.a)({components:{VueTagsInput:y.a}})],j),k=(r(252),r(21)),component=Object(k.a)(C,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("vue-tags-input",{attrs:{"autocomplete-items":t.filteredItems,"add-only-from-autocomplete":!0,required:""},on:{"tags-changed":function(e){return t.$emit("tags",e)}},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}})}),[],!1,null,null,null);e.default=component.exports},246:function(t,e,r){"use strict";r.r(e);r(17),r(18),r(9),r(69);var n=r(22),o=r(33),c=r(31),l=r(32),f=r(19),d=r(8),m=r(4);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var h=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},y=function(t){Object(c.a)(r,t);var e=v(r);function r(){var t;return Object(n.a)(this,r),(t=e.apply(this,arguments)).prevImages=[],t}return Object(o.a)(r,[{key:"previewImg",value:function(t){var e=this,r=t.target;if(this.prevImages.splice(0),r.files){for(var n in this.$emit("img-arr",r.files),r.files)if("object"===Object(d.a)(r.files[n])){var o=new FileReader;o.onload=function(t){e.prevImages.push(t.target.result)},o.readAsDataURL(r.files[n])}}else this.prevImages.splice(0)}},{key:"reset",value:function(){this.prevImages.splice(0)}}]),r}(m.d);h([Object(m.b)({type:Boolean,default:!1})],y.prototype,"multi",void 0);var _=y=h([m.a],y),x=(r(255),r(21)),component=Object(x.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"form-group"},[r("label",{staticClass:"custom-file text-light bg-dark"},[r("input",{staticClass:"custom-file-input",attrs:{type:"file",name:"img",id:"img",placeholder:"images","aria-describedby":"projimg",accept:"image/jpg, image/jpeg, image/png",multiple:t.multi,required:""},on:{change:t.previewImg}}),t._v(" "),r("span",{staticClass:"custom-file-control"},[t._v("\n                Choose Images\n            ")])]),t._v(" "),r("small",{staticClass:"form-text text-muted",attrs:{id:"projimg"}},[t._v("jpeg,, jpg, png and under 512KB")]),t._v(" "),t._t("default")],2),t._v(" "),t._l(t.prevImages,(function(p){return r("div",{key:p+Math.random(),staticClass:"mx-auto row",staticStyle:{display:"inline-block"}},[r("div",{staticClass:"rounded-circle img-prev",style:"background-image: url("+p+")"})])}))],2)}),[],!1,null,null,null);e.default=component.exports},252:function(t,e,r){"use strict";var n=r(239);r.n(n).a},253:function(t,e,r){(e=r(89)(!1)).push([t.i,".modal-content{background-color:rgba(0,0,0,.8)}.ti-autocomplete{color:var(--primary)}",""]),t.exports=e},254:function(t,e,r){var content=r(386);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(90).default)("759718f3",content,!0,{sourceMap:!1})},255:function(t,e,r){"use strict";var n=r(240);r.n(n).a},256:function(t,e,r){(e=r(89)(!1)).push([t.i,".img-prev{background-size:cover;background-position:50%;width:5.5rem;height:5.5rem}",""]),t.exports=e},385:function(t,e,r){"use strict";var n=r(254);r.n(n).a},386:function(t,e,r){(e=r(89)(!1)).push([t.i,".bg-dark[data-v-53ea02e0]{background:rgba(var(--dark),.8)!important}",""]),t.exports=e},420:function(t,e,r){"use strict";r.r(e),r.d(e,"DefaultPost",(function(){return k}));r(17),r(18),r(9),r(69),r(25);var n=r(3),o=r(22),c=r(33),l=r(31),f=r(32),d=r(19),m=r(8),v=r(4),h=r(237),y=r(238),_=r(372),x=r(244);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}var C=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},k={id:0,user_id:0,category_id:0,title:"",slug:"",body:"",img:"",created_at:"",updated_at:"",tags:[]},O=function(t){Object(l.a)(m,t);var e,r,f,d=j(m);function m(){var t;return Object(o.a)(this,m),(t=d.apply(this,arguments)).tags=[],t.cats=[],t.mp=k,t.form=new _.a(["category_id","img","body","tags","title"],{http:t.$axios}),t}return Object(c.a)(m,[{key:"remove",value:(f=Object(n.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(y.b)("#del".concat(e),"fa-trash-alt",this),r=this.$axios.$delete("root/posts/".concat(e)),Object(y.a)("#del".concat(e),"fa-trash-alt",this),r){t.next=6;break}return this.$nf.error(),t.abrupt("return");case 6:this.$nf.success(),this.list.removeItem(e);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"openModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;this.mp=t,this.form.reset(),t.id&&(this.tags=t.tags,this.form.populate({category_id:t.category_id,title:t.title,body:t.body,tags:t.tags})),new Modal(document.querySelector("#postModal")).show()}},{key:"loadCategories",value:(r=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.$nuxt.$loading.start(),t.next=3,this.$axios.$get("categories");case 3:if(e=t.sent,this.$nuxt.$loading.finish(),e){t.next=8;break}return this.$nf.error(),t.abrupt("return");case 8:this.cats=e;case 9:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"closeModal",value:function(){Object.assign(this.mp,k),this.form.reset(),this.imgPrev.reset(),new Modal(document.querySelector("#postModal")).hide()}},{key:"savePost",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){var e,path,r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.form.populate({tags:this.tags.map((function(t){return t.slug}))}),this.mp.id&&this.form.tags.length===this.mp.tags.length&&this.form.tags.sort().every((function(t,e){return t===n.mp.tags.sort()[e].slug}))&&delete this.form.tags,this.imgPrev.prevImages.length||delete this.form.img,e=this.mp.id>0?"patch":"post",path="".concat(this.$axios.defaults.baseURL,"root/posts"),this.mp.id>0&&(path+="/".concat(this.mp.slug)),t.next=8,this.form[e](path).catch((function(){return null}));case 8:if(r=t.sent){t.next=12;break}return this.$nf.error(),t.abrupt("return");case 12:this.$nf.success(),this.list.addItem(r,!!this.mp.id),this.closeModal();case 15:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"mounted",value:function(){var t=this;this.$nextTick((function(){return t.loadCategories()}))}}]),m}(v.d);C([Object(v.c)()],O.prototype,"list",void 0),C([Object(v.c)()],O.prototype,"imgPrev",void 0);var $=O=C([Object(v.a)({components:{AllPosts:h.default,TagInput:x.default}})],O),R=(r(385),r(21)),component=Object(R.a)($,(function(){var t=this,e=this,r=e.$createElement,n=e._self._c||r;return n("div",[n("div",{staticClass:"row mb-4"},[n("div",{staticClass:"col-12"},[n("button",{staticClass:"btn btn-warning text-uppercase",on:{click:function(t){return t.preventDefault(),e.openModal(t)}}},[n("i",{staticClass:"fas fa-plus"}),e._v("\n                Create new Post\n            ")])])]),e._v(" "),n("AllPosts",{ref:"list",attrs:{title:e.$t("admin.title.posts"),path:"post",auth:e.$auth.loggedIn},on:{delete:e.remove,edit:e.openModal}}),e._v(" "),n("div",{staticClass:"modal fade",attrs:{id:"postModal",tabindex:"-1",role:"dialog","aria-labelledby":"postModalLabel","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog modal-lg modal-dialog-scrollable",attrs:{role:"document"}},[n("div",{staticClass:"modal-content bg-dark"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title",attrs:{id:"postModalLabel"}},[e._v("\n                        "+e._s(e.mp.title||"Create new Post")+"\n                    ")]),e._v(" "),e._m(0)]),e._v(" "),n("div",{staticClass:"modal-body"},[n("form",{staticClass:"form needs-validation"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"category"}},[e._v("Category")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.form.category_id,expression:"form.category_id"}],staticClass:"custom-select",class:{"is-invalid":e.form.errors.has("category_id")},attrs:{name:"category",id:"category",disabled:e.mp.id,required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.form,"category_id",t.target.multiple?r:r[0])}}},[n("option",{attrs:{selected:""}},[e._v("Select one")]),e._v(" "),e._l(e.cats,(function(t){return n("option",{key:t.id+t.slug,domProps:{value:t.id,textContent:e._s(t.title)}})}))],2),e._v(" "),n("div",{staticClass:"invalid-feedback",attrs:{"v-if":e.form.errors.has("category_id")},domProps:{textContent:e._s(e.form.errors.first("category_id"))}})]),e._v(" "),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("title")},attrs:{type:"text",name:"title",id:"title",placeholder:"post title","aria-describedby":"titleHelpId",required:""},domProps:{value:e.form.title},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.savePost(e.mp)},input:function(t){t.target.composing||e.$set(e.form,"title",t.target.value)}}}),e._v(" "),n("div",{staticClass:"invalid-feedback",attrs:{"v-if":e.form.errors.has("title")},domProps:{textContent:e._s(e.form.errors.first("title"))}})]),e._v(" "),n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.body,expression:"form.body"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("body")},attrs:{name:"body",placeholder:"enter post body",id:"body",rows:"3",required:""},domProps:{value:e.form.body},on:{input:function(t){t.target.composing||e.$set(e.form,"body",t.target.value)}}}),e._v(" "),e.form.errors.has("body")?n("div",{staticClass:"invalid-feedback",domProps:{textContent:e._s(e.form.errors.first("body"))}}):e._e()]),e._v(" "),n("div",{staticClass:"form-group"},[n("TagInput",{attrs:{path:"root/tags"},on:{tags:function(t){return e.tags=t}}}),e._v(" "),e.form.errors.has("tags")?n("div",{staticClass:"invalid-feedback",domProps:{textContent:e._s(e.form.errors.first("tags"))}}):e._e()],1),e._v(" "),n("ImgPrev",{ref:"imgPrev",on:{"img-arr":function(e){return t.form.populate({img:e[0]})}}},[e.form.errors.has("img")?n("div",{staticClass:"invalid-feedback",domProps:{textContent:e._s(e.form.errors.first("img"))}}):e._e()])],1)]),e._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){e.form.reset(),e.imgPrev.reset()}}},[e._v("\n                        Close\n                    ")]),e._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:e.form.processing},on:{click:function(t){return t.preventDefault(),e.savePost(t)}}},[n("i",{staticClass:"fas",class:e.form.processing?"fa-pulse fa-spinner":"fa-save"}),e._v("\n                        Save changes\n                    ")])])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,"53ea02e0",null);e.default=component.exports;installComponents(component,{AllPosts:r(237).default,TagInput:r(244).default,ImgPrev:r(246).default})}}]);